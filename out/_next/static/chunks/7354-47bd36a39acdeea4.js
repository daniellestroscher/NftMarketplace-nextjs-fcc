(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7354],{46601:function(){},22851:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var a=n(9268),s=JSON.parse('[{"type":"constructor","payable":false,"inputs":[]},{"type":"event","anonymous":false,"name":"Approval","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"approved","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ApprovalForAll","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"operator","indexed":true},{"type":"bool","name":"approved","indexed":false}]},{"type":"event","anonymous":false,"name":"DogMinted","inputs":[{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"Transfer","inputs":[{"type":"address","name":"from","indexed":true},{"type":"address","name":"to","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"function","name":"TOKEN_URI","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"approve","constant":false,"payable":false,"inputs":[{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"balanceOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getApproved","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"getTokenCounter","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"isApprovedForAll","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"},{"type":"address","name":"operator"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"mintNft","constant":false,"payable":false,"inputs":[],"outputs":[]},{"type":"function","name":"name","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"ownerOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"},{"type":"bytes","name":"data"}],"outputs":[]},{"type":"function","name":"setApprovalForAll","constant":false,"payable":false,"inputs":[{"type":"address","name":"operator"},{"type":"bool","name":"approved"}],"outputs":[]},{"type":"function","name":"supportsInterface","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"bytes4","name":"interfaceId"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"symbol","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"tokenURI","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"string"}]},{"type":"function","name":"transferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]}]'),i=n(65209),r=n(19707),o=n(51643),l=n(86006),p=n(93879),d=n(40968),u=n(94196),c=n(59424),y=n(14864),f=n(26221);let m=e=>{let{isVisible:t,onClose:n,nftAbi:s,nftAddress:i,nftMarketplaceAbi:r,nftMarketplaceAddress:m,tokenId:b,imageURI:x}=e,[g,h]=(0,l.useState)(),v=()=>{alert("listed nft successfully"),n&&n()};async function k(e,t,n){console.log("Approve successful");let{request:a}=await (0,o.$q)({address:m,abi:r,functionName:"listItem",args:[e,t,p.fi(n)]}),{hash:s}=await (0,o.n9)(a);s&&(v(),console.log("listed item successful"))}async function N(){if(!g){console.error("listing price not set");return}let{request:e}=await (0,o.$q)({address:i,abi:s,functionName:"approve",args:[m,b]}),{hash:t}=await (0,o.n9)(e);t&&k(i,b,g)}return(0,a.jsx)(d.Z,{open:t,onClose:n,"aria-describedby":"modal-modal-description",style:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,a.jsxs)(u.Z,{className:"flex flex-col items-center gap-4 bg-white",children:[(0,a.jsx)("p",{className:"p-4 text-lg",id:"modal-modal-description",children:"Create a listing to allow others to purchase your NFT."}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2 border-solid border-2 border-gray-400 rounded p-2",children:[(0,a.jsxs)("div",{children:["#",b]}),x?(0,a.jsx)("img",{src:x,alt:"NFT Image",style:{height:"200px",width:"auto"}}):(0,a.jsx)(y.Z,{})]}),(0,a.jsxs)("div",{className:"flex p-6 gap-4",children:[(0,a.jsx)(f.Z,{placeholder:"Set listing price",name:"Listing price",onChange:e=>{h(e.target.value)},type:"number",color:"primary"}),(0,a.jsx)(c.Z,{disabled:!g,onClick:N,children:"List Nft"})]})]})})},b=e=>{let{isVisible:t,onClose:n,nftMarketplaceAbi:s,nftMarketplaceAddress:i,nftAddress:r,tokenId:m,imageURI:b,currentPrice:x}=e,[g,h]=(0,l.useState)(),v=()=>{alert("updated listing successfully"),n&&n()},k=()=>{alert("canceled listing successfully"),n&&n()};async function N(){let{request:e}=await (0,o.$q)({address:i,abi:s,functionName:"cancelListing",args:[r,m]}),{hash:t}=await (0,o.n9)(e);t&&k()}async function w(){if(g){let{request:e}=await (0,o.$q)({address:i,abi:s,functionName:"updateListing",args:[r,m,p.fi(g)]}),{hash:t}=await (0,o.n9)(e);t&&v()}else console.log("No price to update listing with...")}return(0,a.jsx)(d.Z,{open:t,onClose:n,"aria-describedby":"modal-modal-description",style:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,a.jsxs)(u.Z,{className:"flex flex-col items-center gap-4 bg-white",children:[(0,a.jsx)("p",{className:"p-4 text-lg",children:"This is your listing. You may either update the listing price or cancel it."}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2 border-solid border-2 border-gray-400 rounded p-2",children:[(0,a.jsxs)("div",{children:["#",m]}),b?(0,a.jsx)("img",{src:b,alt:"NFT Image",style:{height:"200px",width:"auto"}}):(0,a.jsx)(y.Z,{}),(0,a.jsxs)("div",{className:"font-bold",children:[p.dF(x||0)," ETH"]})]}),(0,a.jsxs)("div",{className:"p-6 flex items-end gap-2",children:[(0,a.jsx)(c.Z,{variant:"outlined",color:"error",id:"cancel-listing",onClick:()=>N(),children:"Cancel Listing"}),(0,a.jsx)(f.Z,{placeholder:"Update listing price",name:"New listing price",onChange:e=>{h(e.target.value)},type:"number",color:"primary"}),(0,a.jsx)(c.Z,{variant:"outlined",disabled:!g,onClick:w,children:"Update Listing"})]})]})})};var x=n(24214),g=n(79896),h=n(33389);let v=(e,t)=>{if(e.length<=t)return e;var n=t-3;return e.slice(0,Math.ceil(n/2))+"..."+e.slice(e.length-Math.floor(n/2))};function k(e){let{price:t,nftAddress:n,tokenId:d,nftMarketplaceAddress:u,seller:c}=e,{isConnected:f,address:k}=(0,r.mA)(),[N,w]=(0,l.useState)(),[I,j]=(0,l.useState)(),[M,A]=(0,l.useState)(),[C,_]=(0,l.useState)(),[F,Z]=(0,l.useState)(!1),L=()=>Z(!1),T=void 0!==c&&void 0!=t;async function S(){let e=await (0,o.a4)({address:n,abi:s,functionName:"tokenURI",args:[d]});e&&j(e.toString())}async function U(){let{request:e}=await (0,o.$q)({address:u,abi:i,functionName:"buyItem",args:[n,d]}),{hash:t}=await (0,o.n9)(e);t&&console.log("buy item successful")}async function E(){if(console.log("TokenURI is: ".concat(I)),I){let e=I.replace("ipfs://","https://ipfs.io/ipfs/"),t=await x.Z.get(e),n=t.data.image;w(n=n.replace("ipfs://","https://ipfs.io/ipfs/")),A(t.data.name),_(t.data.description)}}(0,l.useEffect)(()=>{E()},[I]),(0,l.useEffect)(()=>{f&&S()},[f]);let O=(null==c?void 0:c.toLowerCase())===(null==k?void 0:k.toLowerCase())||void 0===c,P=O?"you":v(c||"",15),R=async function(){if(O)Z(!0);else{console.log(u);try{await U(),alert("bought item successfully")}catch(e){console.log(e),alert("Error buying NFT: ".concat(e))}}};return(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)(m,{isVisible:F&&!T,imageURI:N,nftAbi:s,nftMarketplaceAbi:i,nftAddress:n,tokenId:d,onClose:L,nftMarketplaceAddress:u}),(0,a.jsx)(b,{isVisible:F&&T,imageURI:N,nftMarketplaceAbi:i,nftAddress:n,tokenId:d,onClose:L,nftMarketplaceAddress:u,currentPrice:t}),(0,a.jsx)(h.Z,{title:T?O?"Update listing":"Buy me":"Create listing",children:(0,a.jsx)(g.Z,{variant:"outlined",onClick:R,className:"p-2 w-60 hover:cursor-pointer",children:N?(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{children:["#",d]}),(0,a.jsxs)("div",{className:"italic text-sm",children:["Owned by ",P]}),(0,a.jsx)("img",{src:N,alt:"NFT Image",style:{width:"200px",height:"auto"}}),t?(0,a.jsxs)("div",{className:"font-bold",children:[p.dF(t)," ETH"]}):(0,a.jsx)("br",{}),M&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h6",{children:(0,a.jsx)("b",{children:M})}),(0,a.jsx)("p",{children:C})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)(y.Z,{}),"Loading..."]})})})]})}},81915:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});var a=n(62805),s=n(87056);function i(){let e=(0,a._)(['\n  {\n    activeItems(\n      first: 5\n      where: { buyer: "0x0000000000000000000000000000000000000000" }\n    ) {\n      id\n      buyer\n      seller\n      nftAddress\n      tokenId\n      price\n    }\n  }\n']);return i=function(){return e},e}let r=(0,s.Ps)(i())},65209:function(e){"use strict";e.exports=JSON.parse('[{"type":"error","name":"NftMarketplace__AlreadyListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace__NoProceeds","inputs":[]},{"type":"error","name":"NftMarketplace__NotApprovedForMarketplace","inputs":[]},{"type":"error","name":"NftMarketplace__NotListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenid"}]},{"type":"error","name":"NftMarketplace__NotOwner","inputs":[]},{"type":"error","name":"NftMarketplace__PriceMustBeAboveZero","inputs":[]},{"type":"error","name":"NftMarketplace__PriceNotMet","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}]},{"type":"error","name":"NftMarketplace__TransferFailed","inputs":[]},{"type":"event","anonymous":false,"name":"ItemBought","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"event","anonymous":false,"name":"ItemCanceled","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ItemListed","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"function","name":"buyItem","constant":false,"stateMutability":"payable","payable":true,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"cancelListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"getListing","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"tuple","components":[{"type":"uint256","name":"price"},{"type":"address","name":"seller"}]}]},{"type":"function","name":"getProceeds","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"seller"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"listItem","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}],"outputs":[]},{"type":"function","name":"updateListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"newPrice"}],"outputs":[]},{"type":"function","name":"withdrawProceeds","constant":false,"payable":false,"inputs":[],"outputs":[]}]')},32062:function(e){"use strict";e.exports=JSON.parse('{"31337":{"NftMarketplace":["0x5FbDB2315678afecb367f032d93F642f64180aa3"]},"11155111":{"NftMarketplace":["0x910fF73529e610f498C9eb745449ced8228df025"]}}')}}]);